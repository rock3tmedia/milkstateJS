<!-- date here -->
function convert_time(e){var t=e.match(/\d+/g);e.indexOf("M")>=0&&-1==e.indexOf("H")&&-1==e.indexOf("S")&&(t=[0,t[0],0]),e.indexOf("H")>=0&&-1==e.indexOf("M")&&(t=[t[0],0,t[1]]),e.indexOf("H")>=0&&-1==e.indexOf("M")&&-1==e.indexOf("S")&&(t=[t[0],0,0]),e=0,3==t.length&&(e+=3600*parseInt(t[0]),e+=60*parseInt(t[1]),e+=parseInt(t[2])),2==t.length&&(e+=60*parseInt(t[0]),e+=parseInt(t[1])),1==t.length&&(e+=parseInt(t[0]));var a=Math.floor(e/3600),i=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return(a>0?a+":"+(i<10?"0":""):"")+i+":"+(n<10?"0":"")+n}function getObjByValue(e,t){void 0!==t&&null!==t||(t=self||this),"string"!=typeof e&&(e=""+e);for(var a,i,n,o=0,s=e.length,r="";o<=s;)"."==(a=e[o++])||"["==a||"]"==a||"'"==a||'"'==a||void 0==a?(a==n&&"]"==e[o]?n="":n?r+=a:r?(t?t=t[r]:o=s+2,r=""):"["!=i||'"'!=a&&"'"!=a?("."==i||"["==i||"]"==i&&"]"==a||'"'==i||"'"==i)&&(o=s+2):n=a,i=a):r+=a;if(o==s+2||r)throw"Invalid path: "+e;return t}function isInArray(e,t){return t.indexOf(e)>-1}function startsWith(e,t){return 0===e.lastIndexOf(t,0)}$(function(){jQuery.browser.mobile?$("body").addClass("is-mob"):$("body").addClass("is-desk")});var preloadAssets=function(e,t,a){var i="";"section"==a.view_type&&(i="sec");var n=function(){function e(e){return function(t){$.each(t,function(t,a){var n=a,o="";return new Promise(function(t,a){switch(e){case"img":o=new Image;break;case"script":case"link":o=document.createElement(e)}var s="src";switch(o.onload=function(){t(n)},o.onerror=function(){a(n)},e){case"script":o.type="text/javascript",o.className="pre_jsxrq"+i,o.async=!0;break;case"link":o.type="text/css",o.rel="stylesheet",o.className="pre_cssxrq",s="href","head"}o[s]=n;switch(e){case"script":case"link":window.frames["asset-loader"].document.getElementsByTagName("HEAD")[0].appendChild(o)}})})}}return{css:e("link"),js:e("script"),img:e("img")}}();Promise.all([n.js(t),n.css(e),n.img(img)]).then(function(){}).catch(function(){})};function removeFormLoader(e,t){e.animate({opacity:0},t);setTimeout(function(){e.remove()},t)}function removePopblock(e,t){void 0==t&&(t=300),e.animate({opacity:0},t);setTimeout(function(){e.remove()},t+100)}function resizeWindow(){var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}function inScrollView(e){var t=[];$(".in_view").each(function(e){t[e]=$(this)});var a,i=$("#main-container").outerHeight();for(a=0;a<t.length;++a){var n=t[a].offset().top,o=t[a].outerHeight(),s=i-n,r=!1,l=t[a].attr("data-in-view-target");void 0!==l&&!1!==l&&(r=!0),s>0&&s<o+i?(t[a].hasClass("is_active_view")||t[a].addClass("is_active_view"),t[a].hasClass("is_in_view")||(t[a].addClass("is_in_view"),t[a].removeClass("is_not_in_view"),r&&($("#"+l).addClass("is_in_view"),$("#"+l).removeClass("is_not_in_view")))):t[a].hasClass("is_in_view")&&(t[a].removeClass("is_in_view"),t[a].addClass("is_not_in_view"),r&&($("#"+l).removeClass("is_in_view"),$("#"+l).addClass("is_not_in_view")))}}var msJS=function(e){app={json_views:"/views/views.json",win_loc:"",addToApp:function(){app.win_loc=void 0==e?window.location.pathname.replace(/^\/|\/$/g,""):e.win_loc},view_loc:"",app_idle:!0,initial_load:!0,views:[],menu_data:[],section_states:[],loader_section_target:"#view-section-container",view_section_target:"#view-section-content",template:"",view_loader:"",form_loader:"",html_loaded:!1},app.addToApp();var t,a={view_links:[],view_types:[],view_targets:[],current_pop_count:0,active_pop_count:0};function n(e){var i={};(void 0==(i=void 0==e||null==e?view_state:e).load_type&&(i.load_type="view"),void 0==i.view_type&&(i.view_type="content"),void 0==i.loader_target&&(i.loader_target="body"),void 0==i.view_target&&(i.view_target="body"),0==app.initial_load)&&(startsWith(i.view_link,view_state.view_data_loc)?(i.loader_target=app.loader_section_target,i.view_target=app.view_section_target,i.view_type="section"):(i.loader_target="body",i.view_target="body",i.view_type="content"));("content"==i.view_type&&!app.app_idle||"all"==i.view_type&&!app.app_idle)&&(view_state.forced_content=!0),1==view_state.forced_content&&(i.view_target="body",1==app.html_loaded?i.view_type="content":i.view_type="all"),"all"==i.view_type&&(app.html_loaded=!1),a.current_pop_count++,function(e){"form"!=e.load_type&&($("#view-loader").length?void 0!==t&&(clearTimeout(t),$("#view-loader").removeClass("deactive")):function(e){$(e.loader_target).prepend(app.view_loader)}(e))}(i),1==i.push_state?app.win_loc!=i.view_link&&window.history.pushState({selector:i.view_link,target:i.view_target,type:i.view_type},i.view_link,i.view_link):i.pop_state||window.history.replaceState({selector:i.view_link,target:i.view_target,type:i.view_type},i.view_link,i.view_link),app.win_loc=i.view_link,function(e){a.view_links.push(e.view_link),a.view_types.push(e.view_type),a.view_targets.push(e.view_target)}(i),1==app.app_idle&&(app.app_idle=!1,a.active_pop_count++,o(!0),function(e){var t=function(e){var t=e.split("/"),a=t[0];""==a&&(a="home");t.shift();var i=t.length,n={};return n.view_location=a,n.url_data=t,n.url_data_count=i,n}(e.view_link);e.url_data=t.url_data,e.url_data_count=t.url_data_count,e.view_loc=t.view_location,app.views=[],e.view_data_vals=[];var a="",i="";return $.getJSON("/data/@api.php").then(function(t){var n=t[0];return $.getJSON(app.json_views).then(function(t){var o=t;if($.each(o,function(e,t){var a=e;app.views.push(a)}),isInArray(e.view_loc,app.views)){var s=e.view_loc,r=[];o[s][0].url_data&&(r=o[s][0].url_data),a=s,e.post_url_data_count=r.length;var l=0;$.each(r,function(t,n){var o=n,s=e.url_data[l];i+=0==l?o+"="+s:"&"+o+"="+s,a+="/"+s,e.view_data_vals.push(s),l++}),l&&(i+="&dev_id="+n.dev_id,i+="&dev_key="+n.dev_key)}var c={api_data:n,json_data:o,view_data_loc:a,data_url:i,cur_states:e};return c})})}(i).then(function(e){s(e)}))}function o(e){1==e?($("#asset-loader").length&&$("#asset-loader").remove(),$("<iframe>").attr("src","/views/asset-loader.php").attr("height",0).attr("width",0).attr("border",0).attr("border","none").attr("id","asset-loader").attr("name","asset-loader").prependTo("body")):$("#asset-loader").remove()}view_state={view_link:app.win_loc,view_loc:"",view_type:"",load_type:"",addToState:function(){void 0==e||""==e?(view_state.load_type="view",view_state.view_type="all"):(view_state.load_type=e.load_type,view_state.view_type=e.view_type)},loader_target:"body",view_target:"body",view_data_vals:[],view_data_loc:[],url_data:[],url_data_count:0,post_url_data_count:0,push_state:!1,pop_state:!1,forced_content:!1},view_state.addToState(),mainScroll=null,$.when($.get("/templates/app.view.htm"),$.get("/templates/app.view-loader.htm"),$.get("/templates/app.form-loader.htm")).then(function(e,t,a){app.template=e,app.view_loader=t,app.form_loader=a,n()});var s=function(e){var a=e.cur_states,s=e.json_data,_=e.data_url,p="",v=a.view_loc,d=e.view_data_loc;a.view_data_loc=d;var u=!1;app.menu_data=[],app.section_states=[];var w=[],f="",h=s[v][0].data_link,m="";s[v][0].data_error&&(m=s[v][0].data_error);var y="";s[v][0].error_section&&(y=s[v][0].error_section);var g=[];s[v][0].css&&"section"!=a.view_type&&(g=s[v][0].css);var b=[];s[v][0].js&&"section"!=a.view_type&&(b=s[v][0].js);var k="";s[v][0].template_data&&"all"==a.view_type&&(k=s[v][0].template_data);var j=[],x=[],C=[],O=[],S=[],q=[],I=[],T=[],B=[];if(s[v][0].template_functions&&"all"==a.view_type){var V=s[v][0].template_functions;for(i=0;i<V.length;i++)S.push(V[i])}var A=!1,E="";if(app.section_states.push(v),s[v][0].sections){var M=s[v][0].sections;$.each(M[0],function(e,t){var a=e;w.push(a)}),O.push(w),app.menu_data=O,E=w[0],u=!0}else w=null;if(a.url_data_count>=a.post_url_data_count&&a.url_data_count>0){U();var N="",P=a.url_data_count-a.post_url_data_count;for(P||(N=N+="['sections'][0]['"+E+"'][0]",app.section_states.push(E),Q()),i=0;i<P;i++){var H=a.post_url_data_count+i,W=a.url_data[H];0==i?section_num=1:section_num=i+1,_+="&section"+section_num+"="+W,N=N+="['sections'][0]['"+W+"'][0]";var D=[];if(!A){isInArray(W,O[i])?getObjByValue(N+"['sections']",s[v][0])&&(D=getObjByValue(N+"['sections']",s[v][0])):A=!0;var J=[];if(void 0===D||0==D.length){for(i2=0;i2<D[0].length;i2++){var z=D[0][i2];J.push(z)}O.push(J)}var F=W;app.section_states.push(F)}Q(A)}if(T.length)for(i=0;i<T.length;i++)b.push(T[i]);if(B.length)for(i=0;i<B.length;i++)S.push(B[i]);p=h+"?"+_}else if(0==a.url_data_count){U(!0)}var L=l(a);function U(e){var t="pre_section_data";if(1==e&&(t="landing_page_data"),s[v][0][t][0].pre_content_data&&"section"!=a.view_type&&(j=s[v][0][t][0].pre_content_data),s[v][0][t][0].post_content_data&&"section"!=a.view_type&&(C=s[v][0][t][0].post_content_data),s[v][0][t][0].content_data&&"section"!=a.view_type&&(x=s[v][0][t][0].content_data),s[v][0][t][0].run_functions&&"section"!=a.view_type){var n=s[v][0][t][0].run_functions;for(i=0;i<n.length;i++)S.push(n[i])}if(s[v][0][t][0].post_run_functions&&"section"!=a.view_type){var o=s[v][0][t][0].post_run_functions;for(i=0;i<o.length;i++)q.push(o[i])}}function Q(e){if(e)T=[],I=[],B=[];else{if(getObjByValue(N+"['js']",s[v][0])){var t=getObjByValue(N+"['js']",s[v][0]);T=t}if(getObjByValue(N+"['content_data']",s[v][0])){var a=getObjByValue(N+"['content_data']",s[v][0]);I=a}if(getObjByValue(N+"['run_functions']",s[v][0])){var i=getObjByValue(N+"['run_functions']",s[v][0]);B=i}}}L?(app.app_idle=!0,n(L.cur_states)):$.when(preloadAssets(g,b,null,a),$.get(p),$.Deferred(function(e){$(e.resolve)})).then(function(e,i,s){var _=document.head;$.each(g,function(e,t){var a=t,i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=a,i.className="pre_cssxrq",i.disabled=!0,_.appendChild(i)}),$.each(b,function(e,t){var a=t,i=document.createElement("script");i.type="text/javascript",i.href=a,i.className="pre_jsxrq",_.appendChild(i)});var v=s[0];if(v[0].error||A)p=A?y:m,j=[],C=[],x=[],$.when($.get(p),$.Deferred(function(e){$(e.resolve)})).then(function(e){d(v=e[0],!0)});else{d(v,!1)}function d(e,i){var s=$(app.template);r(k,f,null,i,!0,a).then(function(e){s.prepend(e)}).then(function(){r(x,f,e,i,null,a).then(function(e){s.find("#main-content").prepend(e)}).then(function(){r(j,f,null,i,null,a).then(function(e){s.find("#view-content").prepend(e)}).then(function(){r(C,f,null,i,null,a).then(function(e){s.find("#view-content").append(e)}).then(function(){r(I,f,e,i,null,a).then(function(e){s.find("#view-section-content").html(e)}).then(function(){var e=s;switch(u||e.find("#view-section").remove(),a.view_type){case"content":e=e.find("#view-content").html();break;case"section":e=e.find("#view-section-content").html()}!function(e,a,i,s,r){var _=[];$(e).find("[data-pre-img]").each(function(){var e=$(this).attr("data-pre-img");null!==e&&_.push(e)}),$.when(preloadAssets(null,null,_,null)).then(function(){!function(e,a,i,s,r){var _=l(s);_?(app.app_idle=!0,n(_.cur_states)):(!function(e){switch(e.view_type){case"all":$("#view").css({opacity:0});break;case"content":$("#view-content").css({opacity:0});break;case"section":$("#view-section-content").css({opacity:0})}}(s),function(e){"section"!=e.view_type&&($(".cssxrq").remove(),$(".pre_cssxrq").prop("disabled",!1),$(".pre_cssxrq").removeClass("pre_cssxrq").addClass("cssxrq"))}(s),function(e){$(".jsxrqsec").remove(),"section"!=e.view_type&&$(".jsxrq").remove();$(".pre_jsxrq").removeClass("pre_jsxrq").addClass("jsxrq"),$(".pre_jsxrqsec").removeClass("pre_jsxrqsec").addClass("jsxrqsec")}(s),o(!1),function(e,t){var a=t;switch(e.view_type){case"all":$("body").html(a);break;case"content":$("#view-content").html(a);break;case"section":$("#view-section-content").html(a)}}(s,e),app.html_loaded=!0,app.initial_load=!1,view_state.view_data_loc=s.view_data_loc,setTimeout(function(){!function(e,t){switch(e.view_type){case"all":$("#view").css({opacity:1});break;case"content":$("#view-content").css({opacity:1});break;case"section":$("#view-section-content").css({opacity:1})}}(s),function(e,a,i){$.each(e,function(e,t){var a=t;window[a]()}),function(){void 0==mainScroll||null==mainScroll?e():(mainScroll.destroy(),mainScroll=null,e());function e(){mainScroll=new IScroll("#main-scroll",{scrollbars:!0,scrollX:!1,scrollY:!0,mouseWheel:!0,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!1,fade:!0,bounce:!0,disableTouch:!1,probeType:3,tap:!0,disableMouse:!1,disablePointer:!0})}}(),$.each(a,function(e,t){var a=t;window[a]()});var o=l(i);o?(app.app_idle=!0,n(o.cur_states)):(app.app_idle=!0,view_state.forced_content=!1,$(".view_link").off(),$(".view_link").click(c),function(e){"view"==e.load_type&&($("#view-loader").addClass("deactive"),$("body").removeClass("preload"),t=setTimeout(function(){$("#view-loader").remove()},600));"form"==e.load_type&&($("#form-loader").length&&removeFormLoader($("#form-loader"),300),$("#popblock").length&&removePopblock($("#popblock"),300))}(i))}(a,i,s)},100))}(e,a,i,s)})}(e,S,q,a)})})})})})}},function(e){console.log(e),console.log(e.responseText)})};function r(e,t,a,i,n,o){var s=o.view_type;void 0==n&&(n=!0);var r=[];return e.length>0&&!i&&n?(r=e.map(e=>window[e](a,s)),Promise.all(r).then(e=>e.reduce((e,t)=>e+t),t)):(t=i?a:"",Promise.resolve(t))}function l(e){var t={cur_states:e};return a.current_pop_count>a.active_pop_count&&(a.active_pop_count=a.current_pop_count,t.cur_states.view_link=a.view_links[a.view_links.length-1],t.cur_states.view_type=a.view_types[a.view_types.length-1],t.cur_states.view_target=a.view_targets[a.view_targets.length-1],t)}function c(){var e=$(this),t=e.attr("data-view-link"),a=e.attr("data-view-type"),i=e.attr("data-load-type");return n({view_loc:null,view_link:t,view_type:a,loader_target:"",view_target:e.attr("data-view-target"),load_type:i,push_state:!0,pop_state:!1,url_data:[],url_data_count:[],html_loaded:!1}),!1}window.onpopstate=function(e){(e.state&&e.state.selector||""==e.state.selector)&&n({view_loc:null,view_link:e.state.selector,view_type:e.state.type,load_type:e.state.load_type,view_target:e.state.target,push_state:!1,pop_state:!0,html_loaded:!1})}};